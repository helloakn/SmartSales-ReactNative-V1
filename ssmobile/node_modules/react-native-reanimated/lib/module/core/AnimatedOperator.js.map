{"version":3,"sources":["AnimatedOperator.js"],"names":["AnimatedNode","val","invariant","adapt","reduce","fn","input","a","b","reduceFrom","initialValue","infix","single","OPERATIONS","add","sub","multiply","divide","pow","Math","modulo","sqrt","log","sin","cos","tan","acos","asin","atan","exp","round","abs","ceil","floor","max","min","and","or","not","defined","undefined","isNaN","lessThan","eq","greaterThan","lessOrEq","greaterOrEq","neq","AnimatedOperator","constructor","operator","every","el","type","op","_op","_input","toString","__nodeID","__onEvaluate","_operation","createAnimatedOperator","name","args","map"],"mappings":"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","sourcesContent":["import AnimatedNode from './AnimatedNode';\nimport { val } from '../val';\n\nimport invariant from 'fbjs/lib/invariant';\nimport { adapt } from '../core/AnimatedBlock';\n\nfunction reduce(fn) {\n  return input => input.reduce((a, b) => fn(val(a), val(b)));\n}\n\nfunction reduceFrom(fn, initialValue) {\n  return input => input.reduce((a, b) => fn(val(a), val(b)), initialValue);\n}\n\nfunction infix(fn) {\n  return input => fn(val(input[0]), val(input[1]));\n}\n\nfunction single(fn) {\n  return input => fn(val(input[0]));\n}\n\nconst OPERATIONS = {\n  // arithmetic\n  add: reduce((a, b) => a + b),\n  sub: reduce((a, b) => a - b),\n  multiply: reduce((a, b) => a * b),\n  divide: reduce((a, b) => a / b),\n  pow: reduce((a, b) => Math.pow(a, b)),\n  modulo: reduce((a, b) => ((a % b) + b) % b),\n  sqrt: single(a => Math.sqrt(a)),\n  log: single(a => Math.log(a)),\n  sin: single(a => Math.sin(a)),\n  cos: single(a => Math.cos(a)),\n  tan: single(a => Math.tan(a)),\n  acos: single(a => Math.acos(a)),\n  asin: single(a => Math.asin(a)),\n  atan: single(a => Math.atan(a)),\n  exp: single(a => Math.exp(a)),\n  round: single(a => Math.round(a)),\n  abs: single(a => Math.abs(a)),\n  ceil: single(a => Math.ceil(a)),\n  floor: single(a => Math.floor(a)),\n  max: reduce((a,b) => Math.max(a, b)),\n  min: reduce((a,b) => Math.min(a, b)),\n\n  // logical\n  and: reduceFrom((a, b) => a && b, true),\n  or: reduceFrom((a, b) => a || b, false),\n  not: single(a => !a),\n  defined: single(a => a !== null && a !== undefined && !isNaN(a)),\n\n  // comparing\n  lessThan: infix((a, b) => a < b),\n  /* eslint-disable-next-line eqeqeq */\n  eq: infix((a, b) => a == b),\n  greaterThan: infix((a, b) => a > b),\n  lessOrEq: infix((a, b) => a <= b),\n  greaterOrEq: infix((a, b) => a >= b),\n  /* eslint-disable-next-line eqeqeq */\n  neq: infix((a, b) => a != b),\n};\n\nclass AnimatedOperator extends AnimatedNode {\n  _input;\n  _op;\n  _operation;\n\n  constructor(operator, input) {\n    invariant(\n      typeof operator === 'string',\n      `Reanimated: Animated.operator node first argument should be of type String, but got: ${operator}`\n    );\n    invariant(\n      input.every(\n        el =>\n          el instanceof AnimatedNode ||\n          typeof el === 'string' ||\n          typeof el === 'number'\n      ),\n      `Reanimated: Animated.operator node second argument should be one or more of type AnimatedNode, String or Number but got ${input}`\n    );\n    super(\n      { type: 'op', op: operator, input },\n      input\n    );\n    this._op = operator;\n    this._input = input;\n  }\n\n  toString() {\n    return `AnimatedOperator, id: ${this.__nodeID}`;\n  }\n\n  __onEvaluate() {\n    if (!this._operation) {\n      this._operation = OPERATIONS[this._op];\n      invariant(this._operation, `Illegal operator '%s'`, this._op);\n    }\n    return this._operation(this._input);\n  }\n}\n\nexport function createAnimatedOperator(name) {\n  return (...args) => new AnimatedOperator(name, args.map(adapt));\n}\n"]}